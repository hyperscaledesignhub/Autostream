[0;32m=== Building and Pushing Images to ECR ===[0m

[1;33mMode: Push both producer and Fluss images[0m

[1;33mAWS Account ID: 343218179954[0m
[1;33mAWS Region: us-west-2[0m
[1;33mDemo Repository: 343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss-demo[0m
[1;33mFluss Repository: 343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss[0m

[1;33m[1/5] Logging in to ECR...[0m
Login Succeeded
[0;32mâœ“ Logged in to ECR[0m

[1;33m[2/5] Checking ECR repositories...[0m
[0;32mâœ“ ECR repositories ready[0m

[1;33m[3/5] Building producer application image...[0m
[0;32mJAR already exists[0m
[1;33mBuilding Docker image for linux/amd64...[0m
#0 building with "colima" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 509B done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/eclipse-temurin:17-jre
#2 DONE 4.4s

#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [1/6] FROM docker.io/library/eclipse-temurin:17-jre@sha256:75ab7d1b4b18483e9245342cbee253b558952c1def5c1c18956196330a01683e
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 189.41MB 1.0s done
#5 DONE 1.0s

#6 [2/6] WORKDIR /app
#6 CACHED

#7 [3/6] RUN apt-get update && apt-get install -y bash curl netbase && rm -rf /var/lib/apt/lists/*
#7 CACHED

#8 [4/6] COPY target/fluss-flink-realtime-demo.jar /app/fluss-flink-realtime-demo.jar
#8 DONE 0.4s

#9 [5/6] COPY entrypoint.sh /app/entrypoint.sh
#9 DONE 0.0s

#10 [6/6] RUN chmod +x /app/entrypoint.sh
#10 DONE 0.2s

#11 exporting to image
#11 exporting layers
#11 exporting layers 0.2s done
#11 writing image sha256:73506df019dba4e5636a614f8f6935bed7b37d689a211c287160ce749af4edaf done
#11 naming to docker.io/library/fluss-demo:latest done
#11 DONE 0.2s
[1;33mPushing producer image to ECR...[0m
The push refers to repository [343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss-demo]
6d11ff8dff2e: Preparing
a60413ef3bd4: Preparing
0ee17efd7a24: Preparing
b96b400c8157: Preparing
709856573d51: Preparing
d1d6e1a741f5: Preparing
9eb195841e36: Preparing
f7389bca3ee5: Preparing
0c934f67f30c: Preparing
e8bce0aabd68: Preparing
f7389bca3ee5: Waiting
0c934f67f30c: Waiting
e8bce0aabd68: Waiting
d1d6e1a741f5: Waiting
9eb195841e36: Waiting
6d11ff8dff2e: Pushed
709856573d51: Pushed
a60413ef3bd4: Pushed
b96b400c8157: Pushed
d1d6e1a741f5: Pushed
9eb195841e36: Pushed
0c934f67f30c: Pushed
e8bce0aabd68: Pushed
f7389bca3ee5: Pushed
0ee17efd7a24: Pushed
latest: digest: sha256:6d8ed8b5081f9e56bb862b5f3355e95e271cb3c1e6a1d8aa263d2d75b6ad6f6e size: 2413
The push refers to repository [343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss-demo]
6d11ff8dff2e: Preparing
a60413ef3bd4: Preparing
0ee17efd7a24: Preparing
b96b400c8157: Preparing
709856573d51: Preparing
d1d6e1a741f5: Preparing
9eb195841e36: Preparing
f7389bca3ee5: Preparing
0c934f67f30c: Preparing
e8bce0aabd68: Preparing
9eb195841e36: Waiting
f7389bca3ee5: Waiting
0c934f67f30c: Waiting
e8bce0aabd68: Waiting
d1d6e1a741f5: Waiting
0ee17efd7a24: Layer already exists
6d11ff8dff2e: Layer already exists
a60413ef3bd4: Layer already exists
b96b400c8157: Layer already exists
709856573d51: Layer already exists
0c934f67f30c: Layer already exists
d1d6e1a741f5: Layer already exists
e8bce0aabd68: Layer already exists
9eb195841e36: Layer already exists
f7389bca3ee5: Layer already exists
20251201-195742: digest: sha256:6d8ed8b5081f9e56bb862b5f3355e95e271cb3c1e6a1d8aa263d2d75b6ad6f6e size: 2413
[0;32mâœ“ Producer image pushed to 343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss-demo[0m

[1;33m[4/5] Pulling Apache Fluss image from Docker Hub (linux/amd64)...[0m
0.8.0-incubating: Pulling from apache/fluss
Digest: sha256:8f9bb14bb3fb951c8650b1bb5e0712e275893c2691f139dd7450bfbbcad944e8
Status: Image is up to date for apache/fluss:0.8.0-incubating
docker.io/apache/fluss:0.8.0-incubating
[0;32mâœ“ Fluss image pulled[0m
[1;33mTagging Fluss image for ECR...[0m
[1;33mPushing Fluss image to ECR...[0m
The push refers to repository [343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss]
800aaab7d37d: Preparing
8ddd18586f9c: Preparing
4fb97bb52a2e: Preparing
5f70bf18a086: Preparing
0224e5df9c90: Preparing
e3a7551c9106: Preparing
5e0ac2185887: Preparing
6e562a9e6508: Preparing
3a72941d4d81: Preparing
e4aff7fbe127: Preparing
3e99893f6057: Preparing
767e56ba346a: Preparing
e3a7551c9106: Waiting
5e0ac2185887: Waiting
6e562a9e6508: Waiting
3a72941d4d81: Waiting
e4aff7fbe127: Waiting
3e99893f6057: Waiting
767e56ba346a: Waiting
0224e5df9c90: Pushed
8ddd18586f9c: Pushed
5f70bf18a086: Pushed
800aaab7d37d: Pushed
6e562a9e6508: Pushed
3a72941d4d81: Pushed
5e0ac2185887: Retrying in 5 seconds
5e0ac2185887: Retrying in 4 seconds
5e0ac2185887: Retrying in 3 seconds
5e0ac2185887: Retrying in 2 seconds
5e0ac2185887: Retrying in 1 second
5e0ac2185887: Retrying in 10 seconds
5e0ac2185887: Retrying in 9 seconds
5e0ac2185887: Retrying in 8 seconds
5e0ac2185887: Retrying in 7 seconds
5e0ac2185887: Retrying in 6 seconds
5e0ac2185887: Retrying in 5 seconds
5e0ac2185887: Retrying in 4 seconds
5e0ac2185887: Retrying in 3 seconds
5e0ac2185887: Retrying in 2 seconds
5e0ac2185887: Retrying in 1 second
5e0ac2185887: Pushed
3e99893f6057: Pushed
767e56ba346a: Pushed
e4aff7fbe127: Pushed
e3a7551c9106: Pushed
4fb97bb52a2e: Pushed
0.8.0-incubating: digest: sha256:58c4c7fd656222cd62cec20b64ee2c30dd6504061b9e85025ea86e7e9b2d5835 size: 2835
The push refers to repository [343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss]
800aaab7d37d: Preparing
8ddd18586f9c: Preparing
4fb97bb52a2e: Preparing
5f70bf18a086: Preparing
0224e5df9c90: Preparing
e3a7551c9106: Preparing
5e0ac2185887: Preparing
6e562a9e6508: Preparing
3a72941d4d81: Preparing
e4aff7fbe127: Preparing
3e99893f6057: Preparing
767e56ba346a: Preparing
e3a7551c9106: Waiting
5e0ac2185887: Waiting
6e562a9e6508: Waiting
3a72941d4d81: Waiting
3e99893f6057: Waiting
767e56ba346a: Waiting
e4aff7fbe127: Waiting
8ddd18586f9c: Layer already exists
0224e5df9c90: Layer already exists
800aaab7d37d: Layer already exists
5f70bf18a086: Layer already exists
4fb97bb52a2e: Layer already exists
5e0ac2185887: Layer already exists
6e562a9e6508: Layer already exists
e3a7551c9106: Layer already exists
e4aff7fbe127: Layer already exists
3a72941d4d81: Layer already exists
767e56ba346a: Layer already exists
3e99893f6057: Layer already exists
latest: digest: sha256:58c4c7fd656222cd62cec20b64ee2c30dd6504061b9e85025ea86e7e9b2d5835 size: 2835
[0;32mâœ“ Fluss image pushed to 343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss[0m

[0;32m=== Image Push Complete ===[0m

Images pushed:
  343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss-demo:latest
  343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss:0.8.0-incubating
  343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss:latest

Update terraform.tfvars with:
  demo_image_repository = "343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss-demo"
  fluss_image_repository = "343218179954.dkr.ecr.us-west-2.amazonaws.com/fluss"
  use_ecr_for_fluss = true

